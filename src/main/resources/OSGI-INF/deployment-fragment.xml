<?xml version="1.0"?>

<fragment>

  <extension target="application#MODULE">

    <module>
      <java>${bundle.fileName}</java>
    </module>

  </extension>


<!--
 <extension target="pages#PAGES">
    <page view-id="/getPdfView.xhtml"
        action="#{pdfGeneratorHelper.doGenerate}"/>
  </extension>


  <extension target="web#FILTER">
    <filter-mapping>
      <filter-name>Seam Servlet Filter</filter-name>
      <url-pattern>*.pdf</url-pattern>
    </filter-mapping>

  </extension>
-->
  <extension target="web#SERVLET">


    <servlet-mapping>
      <servlet-name>Faces Servlet</servlet-name>
      <url-pattern>*.seam</url-pattern>
    </servlet-mapping>

    <servlet>
      <servlet-name>Document Store Servlet</servlet-name>
      <servlet-class>org.jboss.seam.pdf.DocumentStoreServlet</servlet-class>
    </servlet>

    <servlet-mapping>
      <servlet-name>Document Store Servlet</servlet-name>
      <url-pattern>*.pdf</url-pattern>
    </servlet-mapping>
  </extension>

  <extension target="faces-config#NAVIGATION">
    <navigation-case>
      <from-outcome>pdf_sheet</from-outcome>
      <to-view-id>/pdfSheetView.xhtml</to-view-id>
      <redirect />
    </navigation-case>
    <navigation-case>
      <from-outcome>simple_pdf</from-outcome>
      <to-view-id>/simplepdf.xhtml</to-view-id>
      <redirect />
    </navigation-case>

  </extension>

  <install>

    <unzip from="${bundle.fileName}" to="/">
      <!-- sample templates -->
      <include>nuxeo.war/**</include>
      <!-- pdf key store config -->
      <include>config/**</include>
    </unzip>

    <unzip from="${bundle.fileName}" to="nuxeo.war/WEB-INF/">
      <include>lib/**</include>
    </unzip>

  </install>

</fragment>

