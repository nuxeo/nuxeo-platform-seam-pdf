<?xml version="1.0"?>

<component name="org.nuxeo.ecm.platform.forms.layouts.webapp.listing.export">

  <require>org.nuxeo.ecm.platform.forms.layouts.webapp.listing</require>

  <extension target="org.nuxeo.ecm.platform.forms.layout.WebLayoutManager"
    point="widgettypes">

    <documentation>
      The widget types from this contribution are intended to be used within a
      layout displaying a table line. They can be configured to match metadata
      from a table iteration item.
      <br />

      The template "/layouts/layout_listing_template.xhtml" handles specific
      configuration for lists of documents rendering. It applies to an item
      instance of SelectDataModel named "documents" in the EL context.
      <br />

      It also requires the following variables to be present in the EL context:
      <ul>
        <li>
          provider: result provider used to get the list of items, its name will
          be used, as well as sort and pagination features it provides.
        </li>
        <li>
          layoutListingStatus: iteration status as provided by the "c:forEach"
          tag, used to print table header matching widget label.
        </li>
      </ul>

      It accepts the the following properties configuration:
      <ul>
        <li>
          showListingHeader: true or false, used to define whether the table
          header should be displayed. This property can also be passed in the EL
          context, using the table iteration status. Defaults to false.
        </li>
        <li>
          showRowEvenOddClass: true or false, used to define if a style class
          should be set on table rows depending on the layoutListingStatus index
          variable (row or odd). Defaults to false.
        </li>
      </ul>
      Its layout columns accept the following properties configuration:
      <ul>
        <li>
          isListingSelectionBox: true or false, used to define wether a "select
          all/unselect all" checkbox should be displayed. To be used in
          conjunction with a widget of type "listing_selection_box". Defaults to
          false.
        </li>
        <li>
          isListingSelectionBoxWithCurrentDocument: true or false, used to
          define wether a "select all/unselect all" checkbox should be
          displayed. To be used in conjunction with a widget of type
          "listing_selection_box_with_current_document". Defaults to false.
        </li>
        <li>
          useFirstWidgetLabelAsColumnHeader: true or false, used to define if
          first widget label should be used as column header label. Will use
          translation settings from the widget configuration. Defaults to false.
        </li>
        <li>
          sortPropertyName: name of the property that will be used by the result
          provider when clicking on the table header. If not set, the sort link
          will not be displayed. Defaults to null.
        </li>
        <li>
          defaultSortAscending: define the initial sort order of the column
          (true : ascending, false : descending) Defaults to null (will be
          interpreted as ascending=true).
        </li>
        <li>
          columnStyleClass: name of the style class that will be used for the
          given column. Defaults to null.
        </li>
      </ul>

      TODO: document layout_listing_ajax_template.xhtml
    </documentation>

    <widgetType name="listing_selection_box_with_current_document">

      <documentation>
        This widget type displays a selection checkbox, that will perform remote
        selection of given item. The current document information is also
        provided to restore current context when clicking on the link.
        <br />
        It requires the following fields configuration:
        <ul>
          <li>first field maps a boolean representing the selection state</li>
          <li>
            second field maps the string identifier used to perform selection
          </li>
        </ul>
        It also requires the following variables to be present in the EL
        context:
        <ul>
          <li>
            provider: result provider used to get the list of items, its name
            will be used.
          </li>
          <li>listName: the name of the list that will hold selected items</li>
          <li>currentDocument: the current document</li>
        </ul>
      </documentation>

      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.TemplateWidgetTypeHandler
      </handler-class>
      <property name="template">
        /widgets/listing/listing_selection_box_with_current_document_widget_template.xhtml
      </property>

    </widgetType>

    <widgetType name="listing_ajax_selection_box_with_current_document">
      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.TemplateWidgetTypeHandler
      </handler-class>
      <property name="template">
        /widgets/listing/listing_ajax_selection_box_with_current_document_widget_template.xhtml
      </property>

    </widgetType>

    <widgetType name="listing_selection_box">

      <documentation>
        This widget type displays a selection checkbox, that will perform remote
        selection of given item.
        <br />
        It requires the following fields configuration:
        <ul>
          <li>first field maps a boolean representing the selection state</li>
          <li>
            second field maps the string identifier used to perform selection
          </li>
        </ul>
        It also requires the following variables to be present in the EL
        context:
        <ul>
          <li>
            provider: result provider used to get the list of items, its name
            will be used.
          </li>
          <li>listName: the name of the list that will hold selected items</li>
        </ul>
      </documentation>

      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.TemplateWidgetTypeHandler
      </handler-class>
      <property name="template">
        /widgets/listing/listing_selection_box_widget_template.xhtml
      </property>

    </widgetType>

    <widgetType name="listing_ajax_selection_box">
      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.TemplateWidgetTypeHandler
      </handler-class>
      <property name="template">
        /widgets/listing/listing_ajax_selection_box_widget_template.xhtml
      </property>
    </widgetType>

    <widgetType name="listing_icon_type">

      <documentation>
        This widget type displays a draggable icon corresponding to a document.
        <br />
        It requires the following fields configuration:
        <ul>
          <li>
            first field maps the document model, the jsf method nxd:iconPath
            will be used to provide its icon
          </li>
          <li>
            second field maps the unique id to be used as drag/drop identified
            (e.g. the document model id)
          </li>
          <li>
            third field maps the icon title (can be the document model type)
          </li>
          <li>
            fourth field maps a boolean stating whether the widget displays a
            droppable zone (e.g. if document is folderish)
          </li>
        </ul>
      </documentation>

      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.TemplateWidgetTypeHandler
      </handler-class>
      <property name="template">
        /widgets/listing/listing_icon_type_widget_template.xhtml
      </property>

    </widgetType>

    <widgetType name="listing_big_icon_type">

      <documentation>
        This widget type displays a big draggable icon corresponding to a
        document.
        <br />
        It requires the following fields configuration:
        <ul>
          <li>
            first field maps the document model, the jsf method nxd:bigIconPath
            will be used to provide its icon
          </li>
          <li>
            second field maps the unique id to be used as drag/drop identified
            (e.g. the document model id)
          </li>
          <li>
            third field maps the displayed icon title (can be the document model
            type)
          </li>
          <li>
            fourth field maps a boolean stating whether the widget displays a
            droppable zone (e.g. if document is folderish)
          </li>
        </ul>
      </documentation>

      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.TemplateWidgetTypeHandler
      </handler-class>
      <property name="template">
        /widgets/listing/listing_big_icon_type_widget_template.xhtml
      </property>

    </widgetType>

    <widgetType name="listing_big_icon_type_link">

      <documentation>
        This widget type displays a big draggable icon corresponding to a
        document with a link to the document.
        <br />
        It requires the following fields configuration:
        <ul>
          <li>
            first field maps the document model, the jsf method nxd:bigIconPath
            will be used to provide its icon and to display the document link
          </li>
          <li>
            second field maps the unique id to be used as drag/drop identified
            (e.g. the document model id)
          </li>
          <li>
            third field maps the displayed icon title (can be the document model
            type)
          </li>
          <li>
            fourth field maps a boolean stating whether the widget displays a
            droppable zone (e.g. if document is folderish)
          </li>
        </ul>
      </documentation>

      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.TemplateWidgetTypeHandler
      </handler-class>
      <property name="template">
        /widgets/listing/listing_big_icon_type_link_widget_template.xhtml
      </property>

    </widgetType>


    <widgetType name="listing_title_link">

      <documentation>
        This widget type displays a link to navigate to a document, as well as a
        download link for the document binary content.
        <br />
        It requires the following fields configuration:
        <ul>
          <li>
            first field maps the document model, it will be used to display the
            document link and its title
          </li>
          <li>
            second field maps the unique id to be used for contextual menu (e.g.
            the document model id)
          </li>
          <li>
            third field maps the displayed link title (can be the document model
            description)
          </li>
          <li>
            fourth field maps the document model file to be used for download
            link
          </li>
          <li>
            fifth field maps the file name to be used for download link (can be
            the document model file name property value)
          </li>
        </ul>
        It also requires the following properties configuration:
        <ul>
          <li>
            file_schema: the file schema name, used to check whether download
            link should be displayed (e.g: file)
          </li>
          <li>file_property_name: the file property name (e.g file:content)</li>
        </ul>
      </documentation>

      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.TemplateWidgetTypeHandler
      </handler-class>
      <property name="template">
        /widgets/listing/listing_title_link_widget_template.xhtml
      </property>

    </widgetType>

    <widgetType name="listing_lock_icon">

      <documentation>
        This widget type displays a lock icon.
        <br />
        It requires the following fields configuration:
        <ul>
          <li>
            first field maps a property stating that lock icon should be
            displayed if not empty (e.g. the document model lock state)
          </li>
        </ul>
      </documentation>

      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.TemplateWidgetTypeHandler
      </handler-class>
      <property name="template">
        /widgets/listing/listing_lock_icon_widget_template.xhtml
      </property>

    </widgetType>

    <widgetType name="listing_author">
      <documentation>
        This widget type displays a user name.
        <br />
        It requires the following fields configuration:
        <ul>
          <li>first field mapping the user identifier</li>
        </ul>
      </documentation>

      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.TemplateWidgetTypeHandler
      </handler-class>
      <property name="template">/widgets/author_widget_template.xhtml</property>

    </widgetType>

    <widgetType name="listing_lifecycle">
      <documentation>
        This widget type displays a life cycle state name.
        <br />
        It requires the following fields configuration:
        <ul>
          <li>first field mapping the life cycle state name</li>
        </ul>
      </documentation>

      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.TemplateWidgetTypeHandler
      </handler-class>
      <property name="template">
        /widgets/listing/listing_lifecycle_widget_template.xhtml
      </property>

    </widgetType>

    <widgetType name="listing_livedit_link">
      <documentation>
        This widget type displays a user name.
        <br />
        It requires the following fields configuration:
        <ul>
          <li>
            first field mapping the document model to be used for live edit link
          </li>
        </ul>
        It also requires the following properties configuration:
        <ul>
          <li>file_schema: the file schema name</li>
          <li>file_field_name: the file field name</li>
          <li>filename_field_name: the file name field name</li>
        </ul>
      </documentation>

      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.TemplateWidgetTypeHandler
      </handler-class>
      <property name="template">
        /widgets/listing/listing_livedit_link_widget_template.xhtml
      </property>

    </widgetType>

    <widgetType name="listing_version">

      <documentation>
        This widget type displays a document model version label
        <br />
        It requires the following fields configuration:
        <ul>
          <li>
            first field mapping the document model, its version label will be
            retrieved querying the versioning service
          </li>
        </ul>
      </documentation>

      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.TemplateWidgetTypeHandler
      </handler-class>
      <property name="template">
        /widgets/listing/listing_version_widget_template.xhtml
      </property>

    </widgetType>

    <widgetType name="listing_datetime">

      <documentation>
        This widget type displays a date
        <br />
        It requires the following fields configuration:
        <ul>
          <li>first field mapping the date</li>
        </ul>
      </documentation>

      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.TemplateWidgetTypeHandler
      </handler-class>
      <property name="template">
        /widgets/listing/listing_datetime_widget_template.xhtml
      </property>

    </widgetType>

  </extension>

  <extension target="org.nuxeo.ecm.platform.forms.layout.WebLayoutManager"
    point="widgets">

    <widget name="listing_selection_box_with_current_document"
      type="listing_selection_box_with_current_document">
      <labels>
        <label mode="any"></label>
      </labels>
      <fields>
        <field>selected</field>
        <field>data.ref</field>
      </fields>
      <widgetModes>
        <mode value="plain">plain</mode>
        <mode value="xl">xl</mode>
      </widgetModes>
    </widget>

    <widget name="listing_ajax_selection_box_with_current_document"
      type="listing_ajax_selection_box_with_current_document">
      <labels>
        <label mode="any"></label>
      </labels>
      <fields>
        <field>selected</field>
        <field>data.ref</field>
      </fields>
      <widgetModes>
        <mode value="plain">plain</mode>
        <mode value="xl">xl</mode>
      </widgetModes>
    </widget>

    <widget name="listing_selection_box" type="listing_selection_box">
      <labels>
        <label mode="any"></label>
      </labels>
      <fields>
        <field>selected</field>
        <field>data.ref</field>
      </fields>
      <widgetModes>
        <mode value="plain">plain</mode>
        <mode value="xl">xl</mode>
      </widgetModes>
    </widget>

    <widget name="listing_ajax_selection_box"
      type="listing_ajax_selection_box">
      <labels>
        <label mode="any"></label>
      </labels>
      <fields>
        <field>selected</field>
        <field>data.ref</field>
      </fields>
      <widgetModes>
        <mode value="plain">plain</mode>
        <mode value="xl">xl</mode>
      </widgetModes>
    </widget>

    <widget name="listing_icon_type" type="listing_icon_type">
      <labels>
        <label mode="any"></label>
      </labels>
      <fields>
        <field>data</field>
        <field>data.ref</field>
        <field>data.type</field>
        <field>data.folder</field>
      </fields>
      <widgetModes>
        <mode value="plain">plain</mode>
        <mode value="xl">xl</mode>
      </widgetModes>
    </widget>

    <widget name="listing_big_icon_type" type="listing_big_icon_type">
      <labels>
        <label mode="any"></label>
      </labels>
      <fields>
        <field>data</field>
        <field>data.ref</field>
        <field>data.type</field>
        <field>data.folder</field>
      </fields>
      <widgetModes>
        <mode value="plain">plain</mode>
        <mode value="xl">xl</mode>
      </widgetModes>
    </widget>

    <widget name="listing_big_icon_type_link"
      type="listing_big_icon_type_link">
      <labels>
        <label mode="any"></label>
      </labels>
      <fields>
        <field>data</field>
        <field>data.ref</field>
        <field>data.type</field>
        <field>data.folder</field>
      </fields>
      <widgetModes>
        <mode value="plain">plain</mode>
        <mode value="xl">xl</mode>
      </widgetModes>
    </widget>

    <widget name="listing_title_link" type="listing_title_link">
      <labels>
        <label mode="any">label.content.header.title</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>data</field>
        <field>data.ref</field>
        <field>data.dc.description</field>
        <field>data.file.content</field>
        <field>data.file.filename</field>
      </fields>
      <properties mode="any">
        <property name="file_property_name">file:content</property>
        <property name="file_schema">file</property>
      </properties>
      <widgetModes>
        <mode value="plain">plain</mode>
        <mode value="xl">xl</mode>
      </widgetModes>
    </widget>

    <widget name="listing_lock_icon" type="listing_lock_icon">
      <labels>
        <label mode="any"></label>
      </labels>
      <fields>
        <field>data.lock</field>
      </fields>
      <widgetModes>
        <mode value="plain">plain</mode>
        <mode value="xl">xl</mode>
      </widgetModes>
    </widget>

    <widget name="listing_modification_date" type="listing_datetime">
      <labels>
        <label mode="any">label.content.header.modified</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>data.dc.modified</field>
      </fields>
      <widgetModes>
        <mode value="plain">plain</mode>
        <mode value="xl">xl</mode>
      </widgetModes>
    </widget>

    <widget name="listing_author" type="listing_author">
      <labels>
        <label mode="any">label.content.header.author</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>data.dublincore.creator</field>
      </fields>
      <widgetModes>
        <mode value="plain">plain</mode>
      </widgetModes>
    </widget>

    <widget name="listing_lifecycle" type="listing_lifecycle">
      <labels>
        <label mode="any">label.content.header.currentLifecycleState</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>data.currentLifeCycleState</field>
      </fields>
      <widgetModes>
        <mode value="plain">plain</mode>
      </widgetModes>
    </widget>

    <widget name="listing_livedit_link" type="listing_livedit_link">
      <labels>
        <label mode="any"></label>
      </labels>
      <fields>
        <field>data</field>
      </fields>
      <properties mode="any">
        <property name="file_schema">file</property>
        <property name="file_field_name">content</property>
        <property name="filename_field_name">filename</property>
      </properties>
    </widget>

    <widget name="listing_version" type="listing_version">
      <labels>
        <label mode="any">label.version</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>data</field>
      </fields>
      <widgetModes>
        <mode value="plain">plain</mode>
      </widgetModes>
    </widget>

    <widget name="listing_description" type="text">
      <labels>
        <label mode="any">label.dublincore.description</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>data.dc.description</field>
      </fields>
      <widgetModes>
        <mode value="plain">plain</mode>
      </widgetModes>
    </widget>

    <widget name="listing_nature" type="selectOneDirectory">
      <labels>
        <label mode="any">label.dublincore.nature</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>data.dc.nature</field>
      </fields>
      <properties mode="any">
        <property name="directoryName">nature</property>
        <property name="localize">true</property>
      </properties>
      <widgetModes>
        <mode value="plain">plain</mode>
      </widgetModes>
    </widget>

    <widget name="listing_subjects" type="template">
      <labels>
        <label mode="any">label.dublincore.subject</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>data.dc.subjects</field>
      </fields>
      <properties mode="any">
        <property name="template">/widgets/subjects_widget.xhtml</property>
      </properties>
      <widgetModes>
        <mode value="plain">view</mode>
      </widgetModes>
    </widget>

    <widget name="listing_rights" type="text">
      <labels>
        <label mode="any">label.dublincore.rights</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>data.dc.rights</field>
      </fields>
    </widget>

    <widget name="listing_source" type="text">
      <labels>
        <label mode="any">label.dublincore.source</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>data.dc.source</field>
      </fields>
    </widget>

    <widget name="listing_coverage" type="template">
      <labels>
        <label mode="any">label.dublincore.coverage</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>data.dc.coverage</field>
      </fields>
      <properties mode="any">
        <property name="template">/widgets/coverage_widget.xhtml</property>
      </properties>
      <widgetModes>
        <mode value="plain">plain</mode>
      </widgetModes>
    </widget>

    <widget name="listing_creation_date" type="listing_datetime">
      <labels>
        <label mode="any">label.dublincore.created</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>data.dc.created</field>
      </fields>
      <widgetModes>
        <mode value="plain">plain</mode>
        <mode value="xl">xl</mode>
      </widgetModes>
    </widget>

    <widget name="listing_format" type="text">
      <labels>
        <label mode="any">label.dublincore.format</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>data.dc.format</field>
      </fields>
      <widgetModes>
        <mode value="plain">plain</mode>
      </widgetModes>
    </widget>

    <widget name="listing_language" type="text">
      <labels>
        <label mode="any">label.dublincore.language</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>data.dc.language</field>
      </fields>
      <widgetModes>
        <mode value="plain">plain</mode>
      </widgetModes>
    </widget>

    <widget name="listing_expiration_date" type="listing_datetime">
      <labels>
        <label mode="any">label.dublincore.expired</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>data.dc.expired</field>
      </fields>
      <widgetModes>
        <mode value="plain">plain</mode>
      </widgetModes>
    </widget>

    <widget name="listing_contributors" type="template">
      <labels>
        <label mode="any">label.dublincore.contributors</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>data.dc.contributors</field>
      </fields>
      <properties mode="any">
        <property name="template">/widgets/contributors_widget.xhtml</property>
      </properties>
      <widgetModes>
        <mode value="plain">plain</mode>
      </widgetModes>
    </widget>

  </extension>

  <extension target="org.nuxeo.ecm.platform.forms.layout.WebLayoutManager"
    point="layouts">

    <layout name="document_listing">
      <templates>
        <template mode="any">/layouts/layout_listing_template.xhtml</template>
      </templates>
      <properties mode="any">
        <property name="showListingHeader">true</property>
        <property name="showRowEvenOddClass">true</property>
      </properties>
      <columns>
        <column>
          <properties mode="any">
            <property name="isListingSelectionBoxWithCurrentDocument">
              true
            </property>
            <property name="useFirstWidgetLabelAsColumnHeader">false</property>
            <property name="columnStyleClass">iconColumn</property>
          </properties>
          <widget>listing_selection_box_with_current_document</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">false</property>
            <property name="columnStyleClass">iconColumn</property>
          </properties>
          <widget>listing_icon_type</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:title</property>
          </properties>
          <widget>listing_title_link</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="columnStyleClass">iconColumn</property>
          </properties>
          <widget>listing_lock_icon</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:modified</property>
            <property name="defaultSortAscending">false</property>
          </properties>
          <widget>listing_modification_date</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:creator</property>
          </properties>
          <widget>listing_author</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="columnStyleClass">iconColumn</property>
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="isSortable">false</property>
          </properties>
          <widget>listing_version</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">
              ecm:currentLifeCycleState
            </property>
          </properties>
          <widget>listing_lifecycle</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="columnStyleClass">iconColumn</property>
          </properties>
          <widget>listing_livedit_link</widget>
        </column>
      </columns>
    </layout>

    <layout name="document_listing_ajax">
      <templates>
        <template mode="any">
          /layouts/layout_listing_ajax_template.xhtml
        </template>
      </templates>
      <properties mode="any">
        <property name="showListingHeader">true</property>
        <property name="showRowEvenOddClass">true</property>
      </properties>
      <columns>
        <column>
          <properties mode="any">
            <property name="isListingSelectionBoxWithCurrentDocument">
              true
            </property>
            <property name="useFirstWidgetLabelAsColumnHeader">false</property>
            <property name="columnStyleClass">iconColumn</property>
          </properties>
          <widget>listing_ajax_selection_box_with_current_document</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">false</property>
            <property name="columnStyleClass">iconColumn</property>
          </properties>
          <widget>listing_icon_type</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:title</property>
          </properties>
          <widget>listing_title_link</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="columnStyleClass">iconColumn</property>
          </properties>
          <widget>listing_lock_icon</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:modified</property>
            <property name="defaultSortAscending">false</property>
          </properties>
          <widget>listing_modification_date</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:creator</property>
          </properties>
          <widget>listing_author</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="columnStyleClass">iconColumn</property>
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="isSortable">false</property>
          </properties>
          <widget>listing_version</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">
              ecm:currentLifeCycleState
            </property>
          </properties>
          <widget>listing_lifecycle</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="columnStyleClass">iconColumn</property>
          </properties>
          <widget>listing_livedit_link</widget>
        </column>
      </columns>
    </layout>

    <layout name="document_virtual_navigation_listing">
      <templates>
        <template mode="any">/layouts/layout_listing_template.xhtml</template>
      </templates>
      <properties mode="any">
        <property name="showListingHeader">true</property>
        <property name="showRowEvenOddClass">true</property>
      </properties>
      <columns>
        <column>
          <properties mode="any">
            <property name="isListingSelectionBox">true</property>
            <property name="useFirstWidgetLabelAsColumnHeader">false</property>
            <property name="columnStyleClass">iconColumn</property>
          </properties>
          <widget>listing_selection_box</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">false</property>
            <property name="columnStyleClass">iconColumn</property>
          </properties>
          <widget>listing_icon_type</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:title</property>
          </properties>
          <widget>listing_title_link</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="columnStyleClass">iconColumn</property>
          </properties>
          <widget>listing_lock_icon</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:modified</property>
            <property name="defaultSortAscending">false</property>
          </properties>
          <widget>listing_modification_date</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:creator</property>
          </properties>
          <widget>listing_author</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
          </properties>
          <widget>listing_version</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">
              ecm:currentLifeCycleState
            </property>
          </properties>
          <widget>listing_lifecycle</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="columnStyleClass">iconColumn</property>
          </properties>
          <widget>listing_livedit_link</widget>
        </column>
      </columns>
    </layout>

    <layout name="document_virtual_navigation_listing_ajax">
      <templates>
        <template mode="any">
          /layouts/layout_listing_ajax_template.xhtml
        </template>
      </templates>
      <properties mode="any">
        <property name="showListingHeader">true</property>
        <property name="showRowEvenOddClass">true</property>
      </properties>
      <columns>
        <column>
          <properties mode="any">
            <property name="isListingSelectionBox">true</property>
            <property name="useFirstWidgetLabelAsColumnHeader">false</property>
            <property name="columnStyleClass">iconColumn</property>
          </properties>
          <widget>listing_ajax_selection_box</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">false</property>
            <property name="columnStyleClass">iconColumn</property>
          </properties>
          <widget>listing_icon_type</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:title</property>
          </properties>
          <widget>listing_title_link</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="columnStyleClass">iconColumn</property>
          </properties>
          <widget>listing_lock_icon</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:modified</property>
            <property name="defaultSortAscending">false</property>
          </properties>
          <widget>listing_modification_date</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:creator</property>
          </properties>
          <widget>listing_author</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
          </properties>
          <widget>listing_version</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">
              ecm:currentLifeCycleState
            </property>
          </properties>
          <widget>listing_lifecycle</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="columnStyleClass">iconColumn</property>
          </properties>
          <widget>listing_livedit_link</widget>
        </column>
      </columns>
    </layout>

    <layout name="document_listing_compact_2_columns">
      <templates>
        <template mode="any">/layouts/layout_listing_template.xhtml</template>
      </templates>
      <columns>
        <column alwaysSelected="true">
          <properties mode="any">
            <property name="columnStyleClass">iconColumn</property>
          </properties>
          <widget>listing_selection_box_with_current_document</widget>
        </column>
        <column alwaysSelected="true">
          <properties mode="any">
            <property name="columnStyleClass">iconColumn</property>
          </properties>
          <widget>listing_icon_type</widget>
        </column>
        <column alwaysSelected="true">
          <widget>listing_title_link</widget>
          <widget>listing_modification_date</widget>
          <widget>listing_author</widget>
          <widget>listing_lifecycle</widget>
          <widget>listing_version</widget>
        </column>
      </columns>
    </layout>

    <layout name="document_listing_ajax_compact_2_columns">
      <templates>
        <template mode="any">
          /layouts/layout_listing_ajax_template.xhtml
        </template>
      </templates>
      <columns>
        <column alwaysSelected="true">
          <properties mode="any">
            <property name="columnStyleClass">iconColumn</property>
          </properties>
          <widget>listing_ajax_selection_box_with_current_document</widget>
        </column>
        <column alwaysSelected="true">
          <properties mode="any">
            <property name="columnStyleClass">iconColumn</property>
          </properties>
          <widget>listing_icon_type</widget>
        </column>
        <column alwaysSelected="true">
          <widget>listing_title_link</widget>
          <widget>listing_modification_date</widget>
          <widget>listing_author</widget>
          <widget>listing_lifecycle</widget>
          <widget>listing_version</widget>
        </column>
      </columns>
    </layout>

    <layout name="document_virtual_navigation_listing_ajax_compact_2_columns">
      <templates>
        <template mode="any">
          /layouts/layout_listing_ajax_template.xhtml
        </template>
      </templates>
      <columns>
        <column alwaysSelected="true">
          <properties mode="any">
            <property name="columnStyleClass">iconColumn</property>
          </properties>
          <widget>listing_ajax_selection_box</widget>
        </column>
        <column alwaysSelected="true">
          <properties mode="any">
            <property name="columnStyleClass">iconColumn</property>
          </properties>
          <widget>listing_icon_type</widget>
        </column>
        <column alwaysSelected="true">
          <widget>listing_title_link</widget>
          <widget>listing_modification_date</widget>
          <widget>listing_author</widget>
          <widget>listing_lifecycle</widget>
          <widget>listing_version</widget>
        </column>
      </columns>
    </layout>

    <layout name="document_listing_icon_2_columns">
      <templates>
        <template mode="any">/layouts/layout_listing_template.xhtml</template>
      </templates>
      <columns>
        <column alwaysSelected="true">
          <widget>listing_selection_box_with_current_document</widget>
        </column>
        <column alwaysSelected="true">
          <widget>listing_big_icon_type_link</widget>
        </column>
        <column alwaysSelected="true">
          <widget>listing_title_link</widget>
        </column>
      </columns>
    </layout>

    <layout name="document_listing_ajax_icon_2_columns">
      <templates>
        <template mode="any">
          /layouts/layout_listing_ajax_template.xhtml
        </template>
      </templates>
      <columns>
        <column alwaysSelected="true">
          <widget>listing_ajax_selection_box_with_current_document</widget>
        </column>
        <column alwaysSelected="true">
          <widget>listing_big_icon_type_link</widget>
        </column>
        <column alwaysSelected="true">
          <widget>listing_title_link</widget>
        </column>
      </columns>
    </layout>

    <layout name="document_virtual_navigation_listing_ajax_icon_2_columns">
      <templates>
        <template mode="any">
          /layouts/layout_listing_ajax_template.xhtml
        </template>
      </templates>
      <columns>
        <column alwaysSelected="true">
          <widget>listing_ajax_selection_box</widget>
        </column>
        <column alwaysSelected="true">
          <widget>listing_big_icon_type_link</widget>
        </column>
        <column alwaysSelected="true">
          <widget>listing_title_link</widget>
        </column>
      </columns>
    </layout>

    <layout name="search_listing_ajax">
      <templates>
        <template mode="any">
          /layouts/layout_listing_ajax_template.xhtml
        </template>
        <template mode="edit_columns">
          /layouts/layout_column_selection_template.xhtml
        </template>
        <template mode="edit_sort_infos">
          /layouts/layout_sort_infos_template.xhtml
        </template>
        <template mode="edit_sort_infos_map">
          /layouts/layout_sort_infos_template.xhtml
        </template>
      </templates>
      <properties mode="any">
        <property name="showListingHeader">true</property>
        <property name="showRowEvenOddClass">true</property>
      </properties>
      <properties mode="edit_columns">
        <property name="availableElementsLabel">
          label.selection.availableColumns
        </property>
        <property name="selectedElementsLabel">
          label.selection.selectedColumns
        </property>
        <property name="selectedElementsHelp"></property>
        <property name="selectSize">10</property>
        <property name="required">true</property>
        <property name="displayAlwaysSelectedColumns">false</property>
      </properties>
      <properties mode="edit_sort_infos">
        <property name="newSortInfoTemplate">
          #{documentSearchActions.newSortInfo}
        </property>
        <property name="required">false</property>
      </properties>
      <properties mode="edit_sort_infos_map">
        <property name="newSortInfoTemplate">
          #{documentSearchActions.newSortInfoMap}
        </property>
        <property name="required">false</property>
      </properties>
      <columns>
        <column name="selection" alwaysSelected="true">
          <properties mode="any">
            <property name="isListingSelectionBox">true</property>
            <property name="useFirstWidgetLabelAsColumnHeader">false</property>
            <property name="columnStyleClass">iconColumn</property>
          </properties>
          <widget>listing_ajax_selection_box</widget>
        </column>
        <column name="icon_type">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">false</property>
            <property name="columnStyleClass">iconColumn</property>
            <property name="label">label.selection.column.icon_type</property>
          </properties>
          <widget>listing_icon_type</widget>
        </column>
        <column name="title_link">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:title</property>
            <property name="label">label.selection.column.title_link</property>
          </properties>
          <properties mode="edit_sort_infos">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <properties mode="edit_sort_infos_map">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <widget>listing_title_link</widget>
        </column>
        <column name="lock">
          <properties mode="any">
            <property name="columnStyleClass">iconColumn</property>
            <property name="label">label.selection.column.lock</property>
          </properties>
          <widget>listing_lock_icon</widget>
        </column>
        <column name="modification_date">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:modified</property>
            <property name="defaultSortAscending">false</property>
            <property name="label">label.content.header.modified</property>
          </properties>
          <properties mode="edit_sort_infos">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <properties mode="edit_sort_infos_map">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <widget>listing_modification_date</widget>
        </column>
        <column name="creator">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:creator</property>
            <property name="label">label.content.header.author</property>
          </properties>
          <properties mode="edit_sort_infos">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <properties mode="edit_sort_infos_map">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <widget>listing_author</widget>
        </column>
        <column name="version">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="label">label.version</property>
          </properties>
          <properties mode="edit_sort_infos">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <properties mode="edit_sort_infos_map">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <widget>listing_version</widget>
        </column>
        <column name="lifecycle">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">
              ecm:currentLifeCycleState
            </property>
            <property name="label">
              label.content.header.currentLifecycleState
            </property>
          </properties>
          <properties mode="edit_sort_infos">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <properties mode="edit_sort_infos_map">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <widget>listing_lifecycle</widget>
        </column>
        <column name="livedit_link">
          <properties mode="any">
            <property name="columnStyleClass">iconColumn</property>
            <property name="label">
              label.selection.column.livedit_link
            </property>
          </properties>
          <widget>listing_livedit_link</widget>
        </column>
        <column name="description" selectedByDefault="false">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:description</property>
            <property name="label">description</property>
          </properties>
          <properties mode="edit_sort_infos">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <properties mode="edit_sort_infos_map">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <widget>listing_description</widget>
        </column>
        <column name="nature" selectedByDefault="false">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:nature</property>
            <property name="label">label.dublincore.nature</property>
          </properties>
          <properties mode="edit_sort_infos">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <properties mode="edit_sort_infos_map">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <widget>listing_nature</widget>
        </column>
        <column name="subjects" selectedByDefault="false">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="label">label.dublincore.subject</property>
          </properties>
          <widget>listing_subjects</widget>
        </column>
        <column name="rights" selectedByDefault="false">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:rights</property>
            <property name="label">label.dublincore.rights</property>
          </properties>
          <properties mode="edit_sort_infos">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <properties mode="edit_sort_infos_map">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <widget>listing_rights</widget>
        </column>
        <column name="source" selectedByDefault="false">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:source</property>
            <property name="label">label.dublincore.source</property>
          </properties>
          <properties mode="edit_sort_infos">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <properties mode="edit_sort_infos_map">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <widget>listing_source</widget>
        </column>
        <column name="coverage" selectedByDefault="false">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:coverage</property>
            <property name="label">label.dublincore.coverage</property>
          </properties>
          <properties mode="edit_sort_infos">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <properties mode="edit_sort_infos_map">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <widget>listing_coverage</widget>
        </column>
        <column name="creation_date" selectedByDefault="false">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:created</property>
            <property name="label">label.dublincore.created</property>
          </properties>
          <properties mode="edit_sort_infos">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <properties mode="edit_sort_infos_map">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <widget>listing_creation_date</widget>
        </column>
        <column name="format" selectedByDefault="false">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:format</property>
            <property name="label">label.dublincore.format</property>
          </properties>
          <properties mode="edit_sort_infos">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <properties mode="edit_sort_infos_map">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <widget>listing_format</widget>
        </column>
        <column name="language" selectedByDefault="false">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:language</property>
            <property name="label">label.dublincore.language</property>
          </properties>
          <properties mode="edit_sort_infos">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <properties mode="edit_sort_infos_map">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <widget>listing_language</widget>
        </column>
        <column name="expired_date" selectedByDefault="false">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="sortPropertyName">dc:expired</property>
            <property name="label">label.dublincore.expired</property>
          </properties>
          <properties mode="edit_sort_infos">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <properties mode="edit_sort_infos_map">
            <property name="showInSortInfoSelection">true</property>
          </properties>
          <widget>listing_expiration_date</widget>
        </column>
        <column name="contributors" selectedByDefault="false">
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
            <property name="label">label.dublincore.contributors</property>
          </properties>
          <widget>listing_contributors</widget>
        </column>
      </columns>
    </layout>

  </extension>

</component>
